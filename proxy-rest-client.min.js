!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.createRCBuilder=t():e.createRCBuilder=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),s=n(2),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,e),!(0,i.isObject)(t))throw new Error("config must be an Object");this._conf=Object.assign({},t,e._defaultConfig)}return o(e,[{key:"addMime",value:function(e,t){if(!(0,i.isString)(e))throw new Error("name of mime must be a String");if(!(0,i.isObject)(t))throw new Error("mime handlers must be an Object");if(!(0,i.isFunction)(t.encode)||!(0,i.isFunction)(t.decode))throw new Error("encode and decode must be a function");return this._conf.mimes[e]=t,this}},{key:"baseUrl",value:function(e){if((0,i.isEmpty)(e))return this._conf.baseUrl;if(!(0,i.isString)(e))throw new Error("url must be a string");return this._conf.baseUrl=e,this}},{key:"build",value:function(){return(0,s.createRC)(this._conf)}},{key:"config",value:function(e){if((0,i.isEmpty)(e))return this._conf;if(!(0,i.isObject)(e))throw new Error("conf must be an Object");return this._conf=Object.assign({},this._conf,e),this}},{key:"contentType",value:function(e){if((0,i.isEmpty)(e))return this._conf.cntType;if(!(0,i.isString)(e))throw new Error("contentType must be a String");return this._conf.contentType=e,this}},{key:"suffix",value:function(e){if((0,i.isEmpty)(e))return this._conf.suffix;if(!(0,i.isString)(e))throw new Error("suffix must be a String");return this._conf.suffix=e,this}},{key:"trailing",value:function(e){if(void 0===e)return this._conf.trailing;if(!(0,i.isString)(e))throw new Error("trailing must be a String");return this._conf.trailing=e,this}},{key:"on",value:function(e,t){if(!(0,i.isString)(e))throw new Error("event must be a String");if(!(0,i.isFunction)(t))throw new Error("handler must be a function");return this._conf.interceptors[e].push(t),this}}],[{key:"_defaultConfig",get:function(){return{baseUrl:"",suffix:null,contentType:"application/json",trailing:"",mimes:{"application/json":{encode:JSON.stringify,decode:JSON.parse},"application/xml":{}},interceptors:{request:[],response:[],success:[],error:[]}}}}]),e}();e.exports=function(e){return new u(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return null===e},i=function(e){return e!==e},s=function(e){return void 0===e},u=function(e){return e instanceof Object},a=function(e){return e instanceof Array},c=function(e){return"string"==typeof e},f=function(e){return"symbol"===(void 0===e?"undefined":r(e))},l=function(e){return e instanceof Function},d=function(e){return 0===Object.keys(e).length},p=function(e){return 0===e.length},h=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce(function(e,t){return t(e)},e)}},y=function(e){return a(e)?p(e):u(e)?d(e):""===e||s(e)||i(e)||o(e)};t.isNull=o,t.isNan=i,t.isUndefined=s,t.isObject=u,t.isArray=a,t.isFunction=l,t.isString=c,t.isSymbol=f,t.isEmpty=y,t.pipe=h},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.createRC=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),a=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(1),f={DELETE:a.default.Methods.DELETE,GET:a.default.Methods.GET,PATCH:a.default.Methods.PATCH,POST:a.default.Methods.POST,PUT:a.default.Methods.PUT},l=function(e){var t=e,n=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o(this,e),this._parent=t,this._name=n,this._id=r,this._resources={},new Proxy(this,e._proxyHandler)}return s(e,[{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._request(Object.assign({},e,{method:f.DELETE}))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request(Object.assign({},t,{method:f.GET,params:e}))}},{key:"patch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request(Object.assign({},t,{method:f.PATCH,data:e}))}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request(Object.assign({},t,{method:f.POST,data:e}))}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request(Object.assign({},t,{method:f.PUT,data:e}))}},{key:"url",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._parent?this._parent.url(!1):t.baseUrl;return this._name&&(n+="/"+this._name),this._id&&(n+="/"+this._id),e&&t.suffix&&(n+="."+t.suffix),n}},{key:"_mapResObj",value:function(e){return{data:JSON.parse(e.response)||null,status:e.status,statusText:e.xhr.statusText}}},{key:"_createReqObj",value:function(n){var o=Object.assign({},e._noopHandlers,n.handlers);return{headers:Object.assign({},{"Content-Type":t.contentType},n.headers),handlers:{request:[].concat(r(t.interceptors.request),r(o.request)),response:[].concat(r(t.interceptors.response),r(o.response)),success:[].concat(r(t.interceptors.success),r(o.success)),error:[].concat(r(t.interceptors.error),r(o.error))},processHandlers:{},method:n.method,url:this.url(),params:n.params,data:n.data}}},{key:"_generateUrl",value:function(e){var n=e?"?":"";return this.url()+t.trailing+n+this._encodeParams(e)}},{key:"_isRequestSuccessful",value:function(e){return 200===e||201===e||204===e||304===e}},{key:"_request",value:function(e){var n=this,r=this._createReqObj(e);r=c.pipe.apply(null,r.handlers.request)(r);var o=new XMLHttpRequest;o.open(r.method,this._generateUrl(r.params),!0),Object.keys(r.headers).forEach(function(e){return o.setRequestHeader(e,r.headers[e])});var i=t.mimes[r.headers["Content-Type"]];if(!i)throw new Error("mimes for this content-type doesn't exists");return o.send(i.encode(r.data)),new Promise(function(e,t){o.onreadystatechange=function(){if(4==o.readyState){var s=c.pipe.apply(null,r.handlers.response)({status:o.status,statusText:o.statusText,data:o.responseText?i.decode(o.responseText):null});n._isRequestSuccessful(s.status)?e(c.pipe.apply(null,r.handlers.success)(s)):t(c.pipe.apply(null,r.handlers.error)(s))}}})}},{key:"_encodeParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).reduce(function(t,n){return t+encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&"},"");return t.slice(0,t.length-1)}}],[{key:"clone",value:function(t,n){var r=new e(t._parent,t._name,n);return r._resources=t._resources,r}},{key:"_noopHandlers",get:function(){return{request:[],response:[],error:[],success:[]}}},{key:"_proxyHandler",get:function(){return{get:function(t,n){if("symbol"===(void 0===n?"undefined":i(n)))return t[n];if(void 0!==t[n])return t[n];var r=new e(t,n);return t._resources[n]=r,t[n]=function(t){return t?e.clone(r,t):r},t[n]}}}}]),e}();return n.prototype.inspect=null,new n};t.createRC=l},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(5),s={method:i.METHODS.GET,data:void 0,headers:{Accept:"application/json","Content-Type":"application/json"},dump:JSON.stringify,load:JSON.parse,xmlHttpRequest:function(){return new XMLHttpRequest},promise:function(e){return new Promise(e)},withCredentials:!1},u=function(e,t){return{status:e.status,response:e.response,data:t,xhr:e}},a=r({},s),c=function(e){a=r({},a,e)},f=function(e,t){return(e&&e.promise?e.promise:a.promise||s.promise)(t)},l=function(e){return f(e,function(t,n){var c=r({},s,a,e),f=c.xmlHttpRequest();if(c.abort&&e.abort(function(){n(u(f)),f.abort()}),void 0===c.url)throw new Error("No URL defined");f.open(c.method,c.params?c.url.split("?")[0]+"?"+o.encode(c.params):c.url,!0),f.withCredentials=c.withCredentials,f.addEventListener(i.EVENTS.LOAD,function(){if(f.status>=200&&f.status<300){var e;f.responseText&&(e=!0===c.raw?f.responseText:c.load(f.responseText)),t(u(f,e))}else n(u(f))}),f.addEventListener(i.EVENTS.ABORT,function(){return n(u(f))}),f.addEventListener(i.EVENTS.ERROR,function(){return n(u(f))}),f.addEventListener(i.EVENTS.TIMEOUT,function(){return n(u(f))});for(var l in c.headers)({}).hasOwnProperty.call(c.headers,l)&&f.setRequestHeader(l,c.headers[l]);if(c.events)for(var l in c.events)({}).hasOwnProperty.call(c.events,l)&&f.addEventListener(l,c.events[l].bind(null,f),!1);var d="object"!=typeof c.data||c.raw?c.data:c.dump(c.data);void 0!==d?f.send(d):f.send()})};l.configure=c,l.Methods=i.METHODS,l.Events=i.EVENTS,l.get=function(e,t,n){return l(r({url:e,method:i.METHODS.GET,params:t},n))},l.put=function(e,t,n){return l(r({url:e,method:i.METHODS.PUT,data:t},n))},l.post=function(e,t,n){return l(r({url:e,method:i.METHODS.POST,data:t},n))},l.patch=function(e,t,n){return l(r({url:e,method:i.METHODS.PATCH,data:t},n))},l.del=function(e,t){return l(r({url:e,method:i.METHODS.DELETE},t))},l.options=function(e,t){return l(r({url:e,method:i.METHODS.OPTIONS},t))},t.default=l},function(e,t,n){"use strict";t.decode=t.parse=n(3),t.encode=t.stringify=n(4)},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var a=e.length;u>0&&a>u&&(a=u);for(var c=0;c<a;++c){var f,l,d,p,h=e[c].replace(s,"%20"),y=h.indexOf(r);y>=0?(f=h.substr(0,y),l=h.substr(y+1)):(f=h,l=""),d=decodeURIComponent(f),p=decodeURIComponent(l),n(i,d)?Array.isArray(i[d])?i[d].push(p):i[d]=[i[d],p]:i[d]=p}return i}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(n(e))}).join(t):i+encodeURIComponent(n(e[o]))}).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.METHODS={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS",HEAD:"HEAD"},t.EVENTS={READY_STATE_CHANGE:"readystatechange",LOAD_START:"loadstart",PROGRESS:"progress",ABORT:"abort",ERROR:"error",LOAD:"load",TIMEOUT:"timeout",LOAD_END:"loadend"}}])})}])});