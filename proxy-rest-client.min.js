!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.createRCBuilder=n():e.createRCBuilder=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=1)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return null===e},i=function(e){return e!==e},u=function(e){return void 0===e},s=function(e){return e instanceof Object},c=function(e){return e instanceof Array},a=function(e){return"string"==typeof e},f=function(e){return"symbol"===(void 0===e?"undefined":r(e))},l=function(e){return e instanceof Function},p=function(e){return 0===Object.keys(e).length},d=function(e){return 0===e.length},y=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){return n.reduce(function(e,n){return n(e)},e)}},h=function(e){return c(e)?d(e):s(e)?p(e):""===e||u(e)||i(e)||o(e)},m=function(e,n){return function(){try{return e.apply(void 0,arguments)}catch(e){return n||e}}},b=function(){};n.isNull=o,n.isNan=i,n.isUndefined=u,n.isObject=s,n.isArray=c,n.isFunction=l,n.isString=a,n.isSymbol=f,n.isEmpty=h,n.pipe=y,n.tryCatch=m,n.noop=b},function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=t(0),u=t(2),s=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,e),!(0,i.isObject)(n))throw new Error("config must be an Object");this._conf=Object.assign({},n,e._defaultConfig)}return o(e,[{key:"addMime",value:function(e,n){if(!(0,i.isString)(e))throw new Error("name of mime must be a String");if(!(0,i.isObject)(n))throw new Error("mime handlers must be an Object");if(!(0,i.isFunction)(n.encode)||!(0,i.isFunction)(n.decode))throw new Error("encode and decode must be a function");return this._conf.mimes[e]=n,this}},{key:"baseUrl",value:function(e){if((0,i.isUndefined)(e))return this._conf.baseUrl;if(!(0,i.isString)(e))throw new Error("url must be a string");return this._conf.baseUrl=e,this}},{key:"build",value:function(){return(0,u.createRC)(this._conf)}},{key:"config",value:function(e){if((0,i.isUndefined)(e))return this._conf;if(!(0,i.isObject)(e))throw new Error("conf must be an Object");return this._conf=Object.assign({},this._conf,e),this}},{key:"contentType",value:function(e){if((0,i.isUndefined)(e))return this._conf.contentType;if(!(0,i.isString)(e))throw new Error("contentType must be a String");return this._conf.contentType=e,this}},{key:"suffix",value:function(e){if((0,i.isUndefined)(e))return this._conf.suffix;if(!(0,i.isString)(e))throw new Error("suffix must be a String");return this._conf.suffix=e,this}},{key:"trailing",value:function(e){if((0,i.isUndefined)(e))return this._conf.trailing;if(!(0,i.isString)(e))throw new Error("trailing must be a String");return this._conf.trailing=e,this}},{key:"on",value:function(e,n){if(!(0,i.isString)(e))throw new Error("event must be a String");if(!(0,i.isFunction)(n))throw new Error("handler must be a function");return this._conf.interceptors[e].push(n),this}}],[{key:"_defaultConfig",get:function(){return{baseUrl:"",suffix:null,contentType:"application/json",trailing:"",mimes:{"application/json":{encode:JSON.stringify,decode:JSON.parse},"application/xml":{}},interceptors:{request:[],response:[],success:[],error:[]}}}}]),e}();e.exports=function(e){return new s(e)}},function(e,n,t){"use strict";function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.createRC=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),s=t(0),c={DELETE:"DELETE",GET:"GET",PATCH:"PATCH",POST:"POST",PUT:"PUT"},a=function(e){return console.warn("encode fn for requested content-type doen't exists"),e},f=function(e){return console.warn("decode fn for requested content-type doen't exists"),e},l=function(e){return e.split(";")[0]},p=function(e){var n=e,t=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o(this,e),this._parent=n,this._name=t,this._id=r,this._resources={},new Proxy(this,e._proxyHandler)}return u(e,[{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._request(Object.assign({},e,{method:c.DELETE}))}},{key:"get",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request(Object.assign({},n,{method:c.GET,params:e}))}},{key:"patch",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request(Object.assign({},n,{method:c.PATCH,data:e}))}},{key:"post",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request(Object.assign({},n,{method:c.POST,data:e}))}},{key:"put",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request(Object.assign({},n,{method:c.PUT,data:e}))}},{key:"url",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._parent?this._parent.url(!1):n.baseUrl;return this._name&&(t+="/"+this._name),this._id&&(t+="/"+this._id),e&&n.suffix&&(t+="."+n.suffix),t}},{key:"_createReqConf",value:function(e){return{headers:Object.assign({},{"Content-Type":n.contentType},e.headers),onUploadProgress:e.onUploadProgress||s.noop,onDownloadProgress:e.onDownloadProgress||s.noop,method:e.method,url:this.url(),params:e.params,data:e.data}}},{key:"_generateUrl",value:function(e){var t=e?"?":"";return this.url()+n.trailing+t+this._encodeParams(e)}},{key:"_isRequestSuccessful",value:function(e){return 200===e||201===e||204===e||304===e}},{key:"_request",value:function(e){var t=this,o=s.pipe.apply(void 0,r(n.interceptors.request)),i=(0,s.pipe)(this._createReqConf.bind(this),o),u=i(e),c=new XMLHttpRequest;c.open(u.method,this._generateUrl(u.params),!0),c.upload.onprogress=n.onUploadProgress,c.onprogress=n.onDownloadProgress,Object.keys(u.headers).forEach(function(e){return c.setRequestHeader(e,u.headers[e])});var p=n.mimes[u.headers["Content-Type"]]||{},d=(0,s.tryCatch)(p.encode||a,u.data);return c.send(d(u.data)),new Promise(function(e,o){return c.onreadystatechange=function(){if(4==c.readyState){var i=s.pipe.apply(void 0,r(n.interceptors.response)),a=s.pipe.apply(void 0,r(n.interceptors.success)),p=s.pipe.apply(void 0,r(n.interceptors.error)),d=(0,s.pipe)(c.getResponseHeader.bind(c,"Content-Type"),l),y=n.mimes[d()]||{},h=(0,s.tryCatch)(y.decode||f,c.responseText),m=i({status:c.status,statusText:c.statusText,data:h(c.responseText),config:u});t._isRequestSuccessful(m.status)?e(a(m)):o(p(m))}}})}},{key:"_encodeParams",value:function(e){var n=Object.keys(e||{}).reduce(function(n,t){return n+encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&"},"");return n.slice(0,n.length-1)}}],[{key:"clone",value:function(n,t){var r=new e(n._parent,n._name,t);return r._resources=n._resources,r}},{key:"_noopHandlers",get:function(){return{request:[],response:[],error:[],success:[]}}},{key:"_proxyHandler",get:function(){return{get:function(n,t){if("symbol"===(void 0===t?"undefined":i(t)))return n[t];if(void 0!==n[t])return n[t];var r=new e(n,t);return n._resources[t]=r,n[t]=function(n){return n?e.clone(r,n):r},n[t]}}}}]),e}();return t.prototype.inspect=null,new t};n.createRC=p}])});