!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.createRCBuilder=t():e.createRCBuilder=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return null===e},i=function(e){return e!==e},u=function(e){return void 0===e},s=function(e){return e instanceof Object},c=function(e){return e instanceof Array},a=function(e){return"string"==typeof e},f=function(e){return"symbol"===(void 0===e?"undefined":r(e))},l=function(e){return e instanceof Function},p=function(e){return 0===Object.keys(e).length},d=function(e){return 0===e.length},y=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce(function(e,t){return t(e)},e)}},h=function(e){return c(e)?d(e):s(e)?p(e):""===e||u(e)||i(e)||o(e)},m=function(e,t){return function(){try{return e.apply(void 0,arguments)}catch(e){return t||e}}},v=function(){};t.isNull=o,t.isNan=i,t.isUndefined=u,t.isObject=s,t.isArray=c,t.isFunction=l,t.isString=a,t.isSymbol=f,t.isEmpty=h,t.pipe=y,t.tryCatch=m,t.noop=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),u=n(2),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,e),!(0,i.isObject)(t))throw new Error("config must be an Object");this._conf=Object.assign({},t,e._defaultConfig)}return o(e,[{key:"addMime",value:function(e,t){if(!(0,i.isString)(e))throw new Error("name of mime must be a String");if(!(0,i.isObject)(t))throw new Error("mime handlers must be an Object");if(!(0,i.isFunction)(t.encode)||!(0,i.isFunction)(t.decode))throw new Error("encode and decode must be a function");return this._conf.mimes[e]=t,this}},{key:"baseUrl",value:function(e){if((0,i.isEmpty)(e))return this._conf.baseUrl;if(!(0,i.isString)(e))throw new Error("url must be a string");return this._conf.baseUrl=e,this}},{key:"build",value:function(){return(0,u.createRC)(this._conf)}},{key:"config",value:function(e){if((0,i.isEmpty)(e))return this._conf;if(!(0,i.isObject)(e))throw new Error("conf must be an Object");return this._conf=Object.assign({},this._conf,e),this}},{key:"contentType",value:function(e){if((0,i.isEmpty)(e))return this._conf.cntType;if(!(0,i.isString)(e))throw new Error("contentType must be a String");return this._conf.contentType=e,this}},{key:"suffix",value:function(e){if((0,i.isEmpty)(e))return this._conf.suffix;if(!(0,i.isString)(e))throw new Error("suffix must be a String");return this._conf.suffix=e,this}},{key:"trailing",value:function(e){if(void 0===e)return this._conf.trailing;if(!(0,i.isString)(e))throw new Error("trailing must be a String");return this._conf.trailing=e,this}},{key:"on",value:function(e,t){if(!(0,i.isString)(e))throw new Error("event must be a String");if(!(0,i.isFunction)(t))throw new Error("handler must be a function");return this._conf.interceptors[e].push(t),this}}],[{key:"_defaultConfig",get:function(){return{baseUrl:"",suffix:null,contentType:"application/json",trailing:"",mimes:{"application/json":{encode:JSON.stringify,decode:JSON.parse},"application/xml":{}},interceptors:{request:[],response:[],success:[],error:[]}}}}]),e}();e.exports=function(e){return new s(e)}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.createRC=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c={DELETE:"DELETE",GET:"GET",PATCH:"PATCH",POST:"POST",PUT:"PUT"},a=function(e){return console.warn("encode fn for requested content-type doen't exists"),e},f=function(e){return console.warn("decode fn for requested content-type doen't exists"),e},l=function(e){return e.split(";")[0]},p=function(e){var t=e,n=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o(this,e),this._parent=t,this._name=n,this._id=r,this._resources={},new Proxy(this,e._proxyHandler)}return u(e,[{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._request(Object.assign({},e,{method:c.DELETE}))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request(Object.assign({},t,{method:c.GET,params:e}))}},{key:"patch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request(Object.assign({},t,{method:c.PATCH,data:e}))}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request(Object.assign({},t,{method:c.POST,data:e}))}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request(Object.assign({},t,{method:c.PUT,data:e}))}},{key:"url",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._parent?this._parent.url(!1):t.baseUrl;return this._name&&(n+="/"+this._name),this._id&&(n+="/"+this._id),e&&t.suffix&&(n+="."+t.suffix),n}},{key:"_createReqConf",value:function(e){return{headers:Object.assign({},{"Content-Type":t.contentType},e.headers),onUploadProgress:e.onUploadProgress||s.noop,onDownloadProgress:e.onDownloadProgress||s.noop,method:e.method,url:this.url(),params:e.params,data:e.data}}},{key:"_generateUrl",value:function(e){var n=e?"?":"";return this.url()+t.trailing+n+this._encodeParams(e)}},{key:"_isRequestSuccessful",value:function(e){return 200===e||201===e||204===e||304===e}},{key:"_request",value:function(e){var n=this,o=s.pipe.apply(void 0,r(t.interceptors.request)),i=(0,s.pipe)(this._createReqConf.bind(this),o),u=i(e),c=new XMLHttpRequest;c.open(u.method,this._generateUrl(u.params),!0),c.upload.onprogress=t.onUploadProgress,c.onprogress=t.onDownloadProgress,Object.keys(u.headers).forEach(function(e){return c.setRequestHeader(e,u.headers[e])});var p=t.mimes[u.headers["Content-Type"]]||{},d=(0,s.tryCatch)(p.encode||a,u.data);return c.send(d(u.data)),new Promise(function(e,o){return c.onreadystatechange=function(){if(4==c.readyState){var i=s.pipe.apply(void 0,r(t.interceptors.response)),a=s.pipe.apply(void 0,r(t.interceptors.success)),p=s.pipe.apply(void 0,r(t.interceptors.error)),d=(0,s.pipe)(c.getResponseHeader.bind(c,"Content-Type"),l),y=t.mimes[d()]||{},h=(0,s.tryCatch)(y.decode||f,c.responseText),m=i({status:c.status,statusText:c.statusText,data:h(c.responseText),config:u});n._isRequestSuccessful(m.status)?e(a(m)):o(p(m))}}})}},{key:"_encodeParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).reduce(function(t,n){return t+encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&"},"");return t.slice(0,t.length-1)}}],[{key:"clone",value:function(t,n){var r=new e(t._parent,t._name,n);return r._resources=t._resources,r}},{key:"_noopHandlers",get:function(){return{request:[],response:[],error:[],success:[]}}},{key:"_proxyHandler",get:function(){return{get:function(t,n){if("symbol"===(void 0===n?"undefined":i(n)))return t[n];if(void 0!==t[n])return t[n];var r=new e(t,n);return t._resources[n]=r,t[n]=function(t){return t?e.clone(r,t):r},t[n]}}}}]),e}();return n.prototype.inspect=null,new n};t.createRC=p}])});