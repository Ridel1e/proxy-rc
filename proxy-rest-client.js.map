{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap c6c9384c89e14627fc91","webpack:///./src/helpers.js","webpack:///./src/proxy-rc.builder.js","webpack:///./src/proxy-rc.js"],"names":["isNull","val","isNan","isUndefined","undefined","isObject","Object","isArray","Array","isString","isSymbol","isFunction","Function","isEmptyObj","obj","keys","length","isEmptyArray","arr","pipe","fns","reduce","acc","fn","x","isEmpty","tryCatch","errVal","err","noop","RCBuilder","conf","Error","_conf","assign","_defaultConfig","name","handlers","encode","decode","mimes","url","baseUrl","cntType","contentType","suf","suffix","trailing","event","handler","interceptors","push","JSON","stringify","parse","request","response","success","error","module","exports","methods","DELETE","GET","PATCH","POST","PUT","encodeNoop","console","warn","decodeNoop","getContentTypeWithoutCharset","hdr","split","createRC","currentConf","Resource","parent","id","_parent","_name","_id","_resources","Proxy","_proxyHandler","_request","method","params","data","reqConf","headers","onUploadProgress","onDownloadProgress","paramTrailing","_encodeParams","status","userReqConf","handleRequest","createThenHandleReqConf","_createReqConf","bind","currentReqConf","xhr","XMLHttpRequest","open","_generateUrl","upload","onprogress","forEach","header","setRequestHeader","mime","encodeOrRaw","send","Promise","resolve","reject","onreadystatechange","readyState","handlerResponse","handlerSuccess","handleError","getResCntType","getResponseHeader","decodeOrRaw","responseText","res","statusText","config","_isRequestSuccessful","encodedParams","param","encodeURIComponent","slice","copy","get","trgt","prop","clone","prototype","inspect"],"mappings":"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","file":"proxy-rest-client.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"createRCBuilder\"] = factory();\n\telse\n\t\troot[\"createRCBuilder\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c6c9384c89e14627fc91","const isNull = (val) => val === null;\n\nconst isNan = (val) => val !== val;\n\nconst isUndefined = (val) => val === undefined;\n\nconst isObject = (val) => val instanceof Object;\n\nconst isArray = (val) => val instanceof Array;\n\nconst isString = (val) => typeof val === 'string';\n\nconst isSymbol = (val) => typeof val === 'symbol';\n\nconst isFunction = (val) => val instanceof Function;\n\nconst isEmptyObj = (obj) => Object.keys(obj).length === 0;\n\nconst isEmptyArray = (arr) => arr.length === 0;\n\nconst pipe = (...fns) => x => fns.reduce((acc, fn) => fn(acc), x);\n\nconst isEmpty = (val) => {\n  if (isArray(val)) { return isEmptyArray(val); }\n\n  if (isObject(val)) { return isEmptyObj(val); }\n\n  return val === '' || isUndefined(val) || isNan(val) || isNull(val);\n}\n\nconst tryCatch = (fn, errVal) => (...args) => {\n  try {\n    return fn(...args);\n  }\n  catch (err) {\n    return errVal || err;\n  }\n} \n\nconst noop = () => {};\n\nexport {\n  isNull,\n  isNan,\n  isUndefined,\n  isObject,\n  isArray,\n  isFunction,\n  isString,\n  isSymbol,\n  isEmpty,\n  pipe,\n  tryCatch,\n  noop\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers.js","import {\n  isEmpty,\n  isObject,\n  isString,\n  isFunction\n} from './helpers';\nimport {createRC} from './proxy-rc';\n\nclass RCBuilder {\n  constructor (conf = {}) {\n    if(!isObject(conf)) {\n      throw new Error('config must be an Object');\n    }\n\n    this._conf = Object\n      .assign({}, conf, RCBuilder._defaultConfig);\n  }\n\n  /**\n   * Adds mime to builder config.\n   * @param {string} name \n   * @param {Object} handlers\n   * @returns {RcBuilder} instance of RCBuilder\n   */\n  addMime (name, handlers) {\n    if(!isString(name)) {\n      throw new Error('name of mime must be a String')\n    }\n\n    if(!isObject(handlers)) {\n       throw new Error('mime handlers must be an Object'); \n    }\n\n    if(!isFunction(handlers.encode) || !isFunction(handlers.decode)) {\n      throw new Error('encode and decode must be a function');\n    }\n\n    this._conf.mimes[name] = handlers;\n\n    return this;\n  }\n\n  /**\n   * Sets baseUrl to config if url is not empty\n   * Returns current baseUrl if url is empty\n   * @param {string|undefined} url\n   * @returns {url|RCBuilder} \n   */\n  baseUrl (url) {\n    if(isEmpty(url)) { return this._conf.baseUrl; }\n\n    if(!isString(url)) { \n      throw new Error('url must be a string');\n    }\n\n    this._conf.baseUrl = url;\n\n    return this; \n  }\n\n  /**\n   * Build RC by conf\n   * @returns {Resource}\n   */\n  build () {\n    return createRC(this._conf);\n  }\n\n  /**\n   * \n   * @param {*} conf \n   */\n  config (conf) {\n    if(isEmpty(conf)) { return this._conf; }\n\n    if(!isObject(conf)) {\n      throw new Error('conf must be an Object');\n    }\n\n    this._conf = Object.assign({}, this._conf, conf);\n\n    return this;\n  }\n\n  /**\n   * \n   * @param {*} cntType \n   */\n  contentType (cntType) {\n    if(isEmpty(cntType)) { return this._conf.cntType; }\n\n    if(!isString(cntType)) {\n      throw new Error('contentType must be a String');\n    }\n\n    this._conf.contentType = cntType;\n\n    return this;\n  }\n\n  /**\n   * \n   * @param {*} suf \n   */\n  suffix (suf) {\n    if(isEmpty(suf)) { return this._conf.suffix; }\n    \n    if(!isString(suf)) {\n      throw new Error('suffix must be a String');\n    }\n\n    this._conf.suffix = suf;\n\n    return this;\n  }\n\n  /**\n   * \n   * @param {*} trailing \n   */\n  trailing (trailing) {\n    if(trailing === undefined) { return this._conf.trailing; }\n\n    if(!isString(trailing)) {\n      throw new Error('trailing must be a String');\n    }\n\n    this._conf.trailing = trailing;\n\n    return this;\n  }\n\n  on (event, handler) {\n    if(!isString(event)) { \n      throw new Error('event must be a String');\n    }\n\n    if(!isFunction(handler)) {\n      throw new Error('handler must be a function');\n    }\n\n    this._conf.interceptors[event].push(handler);\n\n    return this;\n  }\n\n  static get _defaultConfig () {\n    return {\n      baseUrl: '',\n      suffix: null,\n      contentType: 'application/json',\n      trailing: '',\n      mimes: {\n        'application/json': { encode: JSON.stringify, decode: JSON.parse },\n        'application/xml': { /* in progress */ }\n      },\n      interceptors: {\n        request: [],\n        response: [],\n        success: [],\n        error: []\n      }\n    }\n  }\n}\n\nmodule.exports = (conf) => new RCBuilder(conf);\n\n\n\n// WEBPACK FOOTER //\n// ./src/proxy-rc.builder.js","import {pipe, tryCatch, noop} from './helpers';\n/*\n * HTTP method constants. \n */\nconst methods = {\n  DELETE: 'DELETE',\n  GET: 'GET',\n  PATCH: 'PATCH',\n  POST: 'POST',\n  PUT: 'PUT'\n}\n\nconst encodeNoop = (val) => {\n  console.warn('encode fn for requested content-type doen\\'t exists');\n  return val;\n};\n\nconst decodeNoop = (val) => {\n  console.warn('decode fn for requested content-type doen\\'t exists');\n  return val;\n};\n\nconst getContentTypeWithoutCharset = (hdr) => hdr.split(';')[0];\n\n/**\n * Factory Function. Create new Resource object \n * @func createRC\n * @param {*} conf \n */\nconst  createRC = (conf) => {\n  const currentConf = conf;\n\n  class Resource {\n\n    /**\n     * Constructor\n     * @param {*} parent \n     * @param {*} name \n     * @param {*} id \n     */\n    constructor (\n      parent = null,\n      name = '',\n      id = null\n    ) {\n      this._parent = parent;\n      this._name = name;\n      this._id = id;\n      this._resources = {};\n      \n      return new Proxy(this, Resource._proxyHandler)\n    }\n\n    /**\n     * \n     * @param {*} conf \n     */\n    delete (conf = {}) {\n      return this._request(\n        Object.assign({}, conf, { method: methods.DELETE })  \n      );\n    }\n\n    /**\n     * \n     * @param {*} params \n     * @param {*} conf \n     */\n    get (params, conf = {}) {\n      return this._request(\n        Object.assign({}, conf, { method: methods.GET, params })\n      );\n    }\n\n    /**\n     * \n     * @param {*} data \n     * @param {*} conf \n     */\n    patch (data, conf = {}) {\n      return this._request(\n        Object.assign({}, conf, { method: methods.PATCH, data })\n      );\n    }\n\n    /**\n     * \n     * @param {*} data \n     * @param {*} conf \n     */\n    post (data, conf = {}) {\n      return this._request(\n        Object.assign({}, conf, { method: methods.POST, data })\n      );\n    }\n\n    /**\n     * \n     * @param {*} data \n     * @param {*} conf \n     */\n    put (data, conf ={}) {\n      return this._request(\n        Object.assign({}, conf, { method: methods.PUT, data })\n      );\n    }\n\n    /**\n     * \n     * @param {*} suffix \n     */\n    url (suffix = true) {\n      let url = this._parent ?\n                this._parent.url(false) :\n                currentConf.baseUrl;\n      \n      if (this._name) { url += `/${this._name}`; }\n      if (this._id) { url += `/${this._id}`; }\n      if (suffix && currentConf.suffix) { url += `.${currentConf.suffix}`; }\n\n      return url;\n    }\n\n    /**\n     * \n     * @param {*} reqConf \n     */\n    _createReqConf (reqConf) {\n      return {\n        headers: Object.assign({}, {\n          'Content-Type': currentConf.contentType\n        }, reqConf.headers),\n        \n        onUploadProgress: reqConf.onUploadProgress || noop,\n        onDownloadProgress: reqConf.onDownloadProgress || noop,\n\n        method: reqConf.method,\n        url: this.url(),\n        params: reqConf.params,\n        data: reqConf.data\n      }\n    }\n\n    /**\n     * \n     * @param {*} params \n     */\n    _generateUrl (params) {\n      const paramTrailing = params ? '?' : '';\n\n      return this.url() + currentConf.trailing + \n             paramTrailing + this._encodeParams(params);\n    }\n\n    /**\n     * \n     * @param {*} status \n     */\n    _isRequestSuccessful (status) {\n      return status === 200 || \n             status === 201 || \n             status === 204 || \n             status === 304;\n    } \n\n    /**\n     * \n     * @param {*} userReqConf \n     */\n    _request (userReqConf) {\n      const handleRequest = pipe(...currentConf.interceptors.request);\n      const createThenHandleReqConf = pipe(\n        this._createReqConf.bind(this),\n        handleRequest\n      );\n\n      const currentReqConf = createThenHandleReqConf(userReqConf);\n\n      const xhr = new XMLHttpRequest(); \n      xhr.open(\n        currentReqConf.method, \n        this._generateUrl(currentReqConf.params), \n        true\n      );\n\n      xhr.upload.onprogress = currentConf.onUploadProgress;\n      xhr.onprogress = currentConf.onDownloadProgress;\n\n      /* sets all nesesarry headers for xhr obj */\n      Object\n        .keys(currentReqConf.headers)\n        .forEach((header) => \n          xhr.setRequestHeader(header, currentReqConf.headers[header]));\n\n      const mime = currentConf.mimes[currentReqConf.headers['Content-Type']] || {};\n      const encodeOrRaw = tryCatch(mime.encode || encodeNoop, currentReqConf.data);\n\n      xhr.send(encodeOrRaw(currentReqConf.data));\n\n      return new Promise((resolve, reject) =>\n        xhr.onreadystatechange = () => {\n          if (xhr.readyState == 4) {\n            const handlerResponse = pipe(...currentConf.interceptors.response);\n            const handlerSuccess = pipe(...currentConf.interceptors.success);\n            const handleError = pipe(...currentConf.interceptors.error);\n            \n            const getResCntType = pipe(\n              xhr.getResponseHeader.bind(xhr, 'Content-Type'),\n              getContentTypeWithoutCharset\n            );\n\n            const mime = currentConf.mimes[getResCntType()] || {};\n            const decodeOrRaw = tryCatch(mime.decode || decodeNoop, xhr.responseText);\n            \n            const res = handlerResponse({\n              status: xhr.status,\n              statusText: xhr.statusText,\n              data: decodeOrRaw(xhr.responseText),\n              config: currentReqConf\n            });\n\n            if(this._isRequestSuccessful(res.status)) {\n              resolve(handlerSuccess(res));\n            }\n            else {\n              reject(handleError(res));\n            }\n          }\n        }\n      )\n    }\n\n    /**\n     * \n     * @param {*} params \n     */\n    _encodeParams (params) {\n      const encodedParams = Object\n        .keys(params || {})\n        .reduce((acc, param) => {\n          return acc + encodeURIComponent(param) + \n                 '=' + encodeURIComponent(params[param]) + \n                 '&';\n        }, '');\n\n      return encodedParams.slice(0, encodedParams.length - 1);\n    }\n\n    /**\n     * \n     */\n    static get _noopHandlers () {\n      return {\n        request: [],\n        response: [],\n        error: [],\n        success: []\n      }\n    }\n\n    /**\n     * \n     */\n    static get _proxyHandler () {\n      return {\n        get: (trgt, prop) => {\n          if(typeof prop === 'symbol') { return trgt[prop]; }\n          /* Because default value of id and parent is null, we need to create\n            new resource only if property is undefined */\n          if(trgt[prop] !== undefined) { return trgt[prop]; }\n\n          const res = new Resource(trgt, prop);\n\n          trgt._resources[prop] = res;\n          trgt[prop] = (id) => id ? Resource.clone(res, id) : res;\n\n          return trgt[prop];\n        }\n      }\n    }\n\n   /**\n    * \n    * @param {*} res \n    * @param {*} id \n    */\n    static clone (res, id) {\n      const copy = new Resource(\n        res._parent,\n        res._name,\n        id\n      );\n      copy._resources = res._resources;\n\n      return copy;\n    }\n  }\n\n /* \n    after version 6.4.0 of node console.log try to call inspect method for\n    custom object inspect (if it exists). So we place null to it.\n  */\n  Resource.prototype.inspect = null;\n\n  return new Resource();\n};\n\nexport { createRC }\n\n\n\n// WEBPACK FOOTER //\n// ./src/proxy-rc.js"],"sourceRoot":""}